<div class="container">
  <div class="overlay"></div>
  <div class="card"></div>
</div>

<script>
  var container = document.querySelector('.container');
  var overlay = document.querySelector('.overlay');

  function updateCardEffect(x, y) {
    var rotateY = -1 / 5 * x + 20;
    var rotateX = 4 / 30 * y - 20;

    overlay.style = `background-position: ${x / 5 + y / 5}%; filter: opacity(${x / 200}) brightness(1.2)`;
    container.style = `transform: perspective(350px) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
  }


  container.addEventListener('mousemove', function (e) {
    var rect = container.getBoundingClientRect();
    var x = e.clientX - rect.left;
    var y = e.clientY - rect.top;
    updateCardEffect(x, y);
  });

  container.addEventListener('touchmove', function (e) {
    var rect = container.getBoundingClientRect();
    var touch = e.touches[0];
    var x = touch.clientX - rect.left;
    var y = touch.clientY - rect.top;
    updateCardEffect(x, y);
  });

  function resetCardEffect() {
    overlay.style = 'filter: opacity(0)';
    container.style = 'transform: perspective(350px) rotateY(0deg) rotateX(0deg)';
  }

  container.addEventListener('mouseout', resetCardEffect);
  container.addEventListener('touchend', resetCardEffect);
</script>

<style>
  .container {
    width: 220px;
    height: 310px;
    transition: all 0.1s;
    position: relative;
    touch-action: none; 
  }
  .overlay {
    position: absolute;
    width: 220px;
    height: 310px;
    background: linear-gradient(105deg, transparent 40%, rgba(255, 255, 255, 0.8) 45%, rgb(255, 255, 255) 50%, transparent 54%);
    filter: brightness(1.1) opacity(0.8);
    mix-blend-mode: color-dodge;
    background-size: 150% 150%;
    background-position: 100%;
    transition: all 0.1s;
  }
  .card {
    width: 220px;
    height: 310px;
    background-image: url(test.jpg);
    background-size: cover;
  }
</style>
